<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WPAN Gateway: Dynamic address management commands</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WPAN Gateway
   </div>
   <div id="projectbrief">A low-power border router</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="protocols.html">Node protocols</a></li><li class="navelem"><a class="el" href="net_protocol.html">Network protocol</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Dynamic address management commands </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>These commands are used as a sequence initiated by a Node configured in dynamic addressing mode. This mode provides automatic configuration of Nodes and does not require flashing different flavors of the same program on Nodes.</p>
<p>The sequence follows the classic DHCP pattern of DORA, described in <a href="https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol#Operation">this Wikipedia excerpt</a>.</p>
<p><b>Note:</b> Server and gateway are conceptually different but refer to the same entity. Server refers to the DORA server, which attributes addresses, and gateway is the broader WPAN manager and IP forwarder application. Please do not be surprised to see these two terms get used interchangeably.</p>
<p>Since Nodes start out technically address-less and default server address is not specified, addressing conflicts could occur if a dynamically-addressed Node's initial address were the same as a statically-addressed Node's. Broadcasting DORA commands allows both server and client to pick their frames up reliably. This however requires a second layer of addressing to distinguish between concurrent DORA requests from different clients.</p>
<p>As with MAC addressing in DHCP, this DORA implementation uses hardware addresses to direct messages. The hardware address is the ISM3 unique ID.</p>
<p>Consequently, DORA frames look a little bit different from other Network protocol frames: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Offset   </th><th class="markdownTableHeadCenter">Length   </th><th class="markdownTableHeadNone">Data    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyNone">Protocol ID    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyNone">Command    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">2   </td><td class="markdownTableBodyCenter">12   </td><td class="markdownTableBodyNone">Source UID    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">14   </td><td class="markdownTableBodyCenter">12   </td><td class="markdownTableBodyNone">Destination UID    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">26   </td><td class="markdownTableBodyCenter">X   </td><td class="markdownTableBodyNone">Command data   </td></tr>
</table>
<p>See the relevant commands for command data information:</p><ul>
<li><a class="el" href="wpan_8h.html#a82117ff04e4b763a226eb547319b095e" title="Discover command.">NETWORK_DISCOVER</a></li>
<li><a class="el" href="wpan_8h.html#a9b5fd875c625734e89dbf526f67d5b57" title="Offer address.">NETWORK_OFFER</a></li>
<li><a class="el" href="wpan_8h.html#a02a2f87c81d60d1259fc11d7dbaf8dab" title="Request address and group.">NETWORK_REQUEST</a></li>
<li><a class="el" href="wpan_8h.html#ac60baa80629bef34c13bd6a171f278c7" title="NETWORK_ACK.">NETWORK_ACK</a></li>
<li><a class="el" href="wpan_8h.html#a8162cde2759700c773e0787d11f56b3b" title="Error command.">NETWORK_DORA_ERR</a></li>
</ul>
<p>To summarize:</p><ol type="1">
<li>Node broadcasts a Discover command</li>
<li>wpanManager responds with an Offer containing an address for the node</li>
<li>Node Requests the address and the group it wants to be in.</li>
<li>wpanManager Acknowledges the node's new address and group and gives it a lease duration</li>
</ol>
<p>Lease duration is specified in minutes, depending on <a class="el" href="wpan_8h.html#a3a8109c9fad7bcf83da64e8f712a6696" title="Lease to minute conversion.">NETWORK_LEASE_UNIT_MINUTES</a>. A lease of 0 minutes means the address was not granted. Nodes are responsible for lease renewal, as WPAN manager will consider them timed out once their lease expires. A timed-out Node is not accessible anymore, it is considered disconnected. A <a class="el" href="wpan_8h.html#a1fce7684f4b5ea3f44ba05afe39fa313" title="Disconnect node.">NETWORK_DISCONNECT</a> command is sent to timed-out nodes so that they may know that they can no longer use their address. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
